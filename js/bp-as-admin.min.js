window.bp=window.bp||{},function(e,i){i("body.settings_page_bp-avatar-suggestions").on("tb_unload","#TB_window",function(e){e.preventDefault(),i(location).prop("href",bp_as_admin_vars.redirect)}),"undefined"!=typeof BP_Uploader&&(bp.Models=bp.Models||{},bp.Collections=bp.Collections||{},bp.Views=bp.Views||{},bp.Suggestions={start:function(){this.views=new Backbone.Collection,this.warning=null,this.uploaderView(),this.suggestions=bp.Uploader.filesUploaded},uploaderView:function(){bp.Uploader.filesQueue.on("add",this.uploadProgress,this);var e=new bp.Views.Uploader;this.views.add({id:"upload",view:e}),e.inject(".bp-avatar-suggestions")},uploadProgress:function(){var e=new bp.Views.uploadSuggestionStatus({collection:bp.Uploader.filesQueue});_.isUndefined(this.views.get("status"))?this.views.add({id:"status",view:e}):this.views.set({id:"status",view:e}),e.inject(".bp-avatar-status")}},bp.Views.uploadSuggestionStatus=bp.Views.uploaderStatus.extend({className:"files",initialize:function(){bp.Views.uploaderStatus.prototype.initialize.apply(this,arguments),this.collection.on("change:url",this.prependImage,this)},prependImage:function(e){_.isUndefined(e.get("url"))||i("#"+e.get("id")+" .filename img").length||i("#"+e.get("id")+" .filename").prepend('<img src="'+e.get("url")+'"> ')}}),bp.Suggestions.start())}(bp,jQuery);
